project:
  service: # describe each service with it's associated vm
    - id: "1"
      provider: "ansible"
      type: "generic"
      targets:
        - "1"
      opts:
        playbook: "init.yml"
    - id: "2"
      provider: "ansible"
      type: "generic"
      targets:
        - "1"
      opts:
        playbook: "docker.yml"
    - id: "3"
      provider: "ansible"
      type: "generic"
      targets:
        - "1"
      opts:
        playbook: "init.yml"
    - id: "4"
      provider: "ansible"
      type: "generic"
      targets:
        - "1"
      opts:
        playbook: "docker.yml"
    - id: "5"
      provider: "docker"
      type: "generic"
      targets:
        - "1"
      opts:
        image: "nginx"
        ports:
          80/tcp: 80


  topology: # Describe service dependecies
    provider:
      - name: "openstack"
        region:
          - name: "CORE"
            vm:
              {% for i in range(3) %}

              - id: "{{i}}"
                flavor: "m1.small"
                image: "Ubuntu-16-04"
                key: "tosca_key"
                networks:
                  - "ece1548-net"
              {% endfor %}
